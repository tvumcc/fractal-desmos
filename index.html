<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Fractal Desmos</title>
    <link rel="stylesheet" href="./style.css"/>
    <link rel="stylesheet" href="./lib/mathquill.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type="module" src="./lib/mathquill.js"></script>
    <script type="module" src="./src/main.ts"></script>
    <script type="module" src="./src/mq_entry.js"></script>
  </head>
  <body>
    <div class="main-container">
      <div id="side-panel">
        <div class="title">
          <h1>Fractal Desmos</h1>
          <p><a href="https://github.com/tvumcc/fractal-desmos" target="_blank"><img width="30" height="30" src="./assets/github.png"></a></p>
        </div>
        <div id="info">
          <div class="section-header">
            <button class="collapse-button" name="how-to-use">▶</button>
            <h2>How To Use</h2>
          </div>
          <div id="how-to-use">
            <p>
              Enter in your own equations for an 
              <a href="https://en.wikipedia.org/wiki/Plotting_algorithms_for_the_Mandelbrot_set#Escape_time_algorithm">escape time fractal</a>
              or choose from the presets
              to get some ideas. 
            </p>
            <p><b>z<sub>0</sub></b> is the initial value of <b>z</b>, and <b>f(z)</b>
              is a function of <b>z</b> applied on each iteration to get the next value of <b>z</b>.
            </p>
            <p>
              Variables you add in the equations that aren't predefined parameters (listed below)
              will appear as sliders.              
            </p>
          </div>
          <div class="section-header">
            <button class="collapse-button" name="controls">▶</button>
            <h2>Controls</h2>
          </div>
          <div id="controls">
            <p>Use these in the fractal viewport:</p>
            <p><b>Left Click</b> and drag to pan</p>
            <p><b>Right Click</b> and drag to set the value of <b>c</b></p>
            <p><b>Scroll</b> to zoom in or out on a location</p>
          </div>
          <div class="section-header">
            <button class="collapse-button" name="parameters">▶</button>
            <h2>Parameters</h2>
          </div>
          <div id="parameters">
            <p>Use these as variables in your equations:</p>
            <p><b>z</b> iteration variable</p>
            <p><b>i</b> the square root of -1</p>
            <p><b>x</b> pixel coordinate</p>
            <p><b>t</b> current time (imaginary part = 0)</p>
            <p><b>c</b> mouse coordinates</p>
          </div>
          <div class="section-header">
            <button class="collapse-button" name="color-maps">▶</button>
            <h2>Color Maps</h2>
          </div>
          <div id="color-maps">
            <button class="color-map-button" id="green">Green</button>
            <button class="color-map-button" id="rainbow">Rainbow</button>
            <button class="color-map-button" id="viridis">Viridis</button>
          </div>
          <div class="section-header">
            <button class="collapse-button" name="presets">▶</button>
            <h2>Presets</h2>
          </div>
          <div id="presets">
            <button class="preset-button" id="time-julia-set">Time Julia Set</button>
            <button class="preset-button" id="mouse-julia-set">Mouse Julia Set</button>
            <button class="preset-button" id="star-julia">Star Julia</button>
            <button class="preset-button" id="inverse-julia">Inverse Julia</button>
            <button class="preset-button" id="mandelbrot-set">Mandelbrot Set</button>
            <button class="preset-button" id="sine-mandelbrot">Sine Mandelbrot</button>
            <button class="preset-button" id="moth">Moth</button>
            <button class="preset-button" id="web">Web</button>
          </div>

          <hr>
          <div class="entry">
            <p class="equation-indicator">
              <span class="latex">z_0</span>
            </p>
            <p class="equals">=</p>
            <p class="formula-entry">
              <span id="z0">x+a</span>
            </p>
          </div>
          <div class="entry">
            <p class="equation-indicator">
              <span class="latex">f(z)</span>
            </p>
            <p class="equals">=</p>
            <p class="formula-entry">
              <span id="fz">z^2+\cos\left(t\right)+i\sin\left(t\right)</span>
            </p>
          </div>
        </div>

        <div id="var-sliders"></div>
      </div>

      <div class="fractal-canvas">
        <button id="panel-collapse-button">▶</button>
        <canvas id="webgpu-canvas"></canvas>
      </div>
    </div>
  </body>
</html>